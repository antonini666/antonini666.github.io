const $ = (el) => document.querySelector(el),
  $$ = (el) => document.querySelectorAll(el),
  ls = localStorage;

(function controlColorTheme() {
  if (!ls.getItem("theme")) ls.setItem("theme", 0);

  if (ls.getItem("theme") == 1) {
    $(".color-theme-button").checked = false;
    colorTheme();
  }

  let colorCounter = 0;
  $(".switch-wrapper").onclick = function () {
    colorCounter++;
    if (colorCounter % 2 == 0) {
      ls.getItem("theme") == 0
        ? ls.setItem("theme", 1)
        : ls.setItem("theme", 0);
      colorTheme();
    }
  };

  function colorTheme() {
    $(".first-section a").classList.toggle("github-href-white");
    $$(".slider-b").forEach((it) => it.classList.toggle("slider-b-white"));
    $("body").classList.toggle("white-bg");
    $("body").classList.toggle("scroll-white");
    $$(".brk-btn").forEach((it) => it.classList.toggle("brk-btn-black"));
    $$(".fa-check").forEach((it) => it.classList.toggle("fa-white"));
    $$(".contact").forEach((it) => it.classList.toggle("contact-white"));
    $(".fa-phone").classList.toggle("fa-phone-white");
    $(".white-end div").classList.toggle("end-desc-white");
  }
})();

(function controlLanguage() {
  let language = window.navigator
    ? window.navigator.language ||
      window.navigator.systemLanguage ||
      window.navigator.userLanguage
    : "ru";
  language = language.substr(0, 2).toLowerCase();

  if (!ls.getItem("language")) {
    if (language == "ru") {
      $(".language-button").checked = false;
      ruTranslator();
    } else {
      $(".language-button").checked = true;
      language = "en";
    }
  }

  if (ls.getItem("language") == "ru") {
    $(".language-button").checked = false;
    ruTranslator();
  } else {
    $(".language-button").checked = true;
    language = "en";
  }

  let lang = 0;
  $(".switch-language").onclick = () => {
    lang++;
    if (lang % 2 == 0) language == "en" ? ruTranslator() : enTranslator();
  };

  function ruTranslator() {
    $(".color-theme-wrapper > label .switch-desk").classList.add(
      "switch-desk-ru"
    );
    $(".color-theme-wrapper > label .switch-desk").innerText = "Цветная тема";
    $(".switch-desk-lang").innerText = "Russian";

    $(".first-section .h1").classList.add("h1-ru");
    $(".first-section .h3").classList.add("h3-ru");

    $(".first-section .h1").innerText = "Антон Яновский";
    $(".first-section .h3").innerText = "Front-end Developer";

    $(".below-first-screen").innerText = "Ниже представлены мои работы";

    $$(".brk-btn").forEach((it) => (it.innerText = "Посетить"));

    $(".portfolio-firebase-shop h2").innerText = "Приложение Firebase Shop";
    $(".portfolio-firebase-shop h3").innerText =
      "Firebase Shop - приложение для добавление, редактирования и удаления товаров. Стек технологий: React(React Hooks), Redux, React Router, Firebase, Sass";

    $(".portfolio-song-bird h2").innerText = "Приложение SongBird";
    $(".portfolio-song-bird h3").innerText =
      "Приложение Songbird - викторина распознавания птиц по их голосам. Стек технологий: React(React Hooks), Sass";

    $(".portfolio-quiz h2").innerText = "Приложение Викторина";
    $(".portfolio-quiz h3").innerText =
      "Викторина на тему Javascript. Стек технологий: React, Css";

    $(".portfolio-todo h2").innerText = "Приложение Список дел";
    $(".portfolio-todo h3").innerText =
      "Простое приложение списка дел. Стек технологий: React, Css";

    $(".portfolio-layout h2").innerText = "Cloudbudget";
    $(".portfolio-layout h3").innerText =
      "Адаптивный лендинг Cloudbudget. Стек технологий: Html, Css, JavaScript";

    $(".portfolio-layout-two h2").innerText = "MartaUp";
    $(".portfolio-layout-two h3").innerText =
      "Адаптивный лендинг MartaUp. Стек технологий: Html, Css, JavaScript";

    $(".my-skills-title").innerText = "Мои Навыки";
    $(".connect-title").innerText = "Для связи";
    $(".end-desc").innerText = "Спасибо за внимание";

    language = "ru";
    ls.setItem("language", "ru");
  }
  function enTranslator() {
    $(".color-theme-wrapper > label .switch-desk").innerText = "Color theme";
    $(".color-theme-wrapper > label .switch-desk").classList.remove(
      "switch-desk-ru"
    );
    $(".switch-desk-lang").innerText = "English";
    $(".first-section .h1").innerText = "Anton Yanovskyi";
    $(".first-section .h1").classList.remove("h1-ru");
    $(".first-section .h3").innerText = "Front-end Developer";
    $(".first-section .h3").classList.remove("h3-ru");
    $(".below-first-screen").innerText = "Below are my works";

    $$(".brk-btn").forEach((it) => (it.innerText = "visit"));

    $(".portfolio-firebase-shop h2").innerText = "Firebase Shop App";
    $(".portfolio-firebase-shop h3").innerText =
      "The Firebase Shop is an application for adding, editing and deleting products. Technology Stack: React (React Hooks), Redux, React Router, Firebase, Sass";

    $(".portfolio-song-bird h2").innerText = "SongBird app";
    $(".portfolio-song-bird h3").innerText =
      "Songbird app is a quiz for recognizing birds by their voices. Technology Stack: React (React Hooks), Sass";

    $(".portfolio-quiz h2").innerText = "Quiz app";
    $(".portfolio-quiz h3").innerText =
      "Javascript Quiz. Technology Stack: React, Css";

    $(".portfolio-todo h2").innerText = "Todo List app";
    $(".portfolio-todo h3").innerText =
      "A simple to-do list app. Technology Stack: React, Css";

    $(".portfolio-layout h2").innerText = "Cloudbudget";
    $(".portfolio-layout h3").innerText =
      "Responsive Landing Cloudbudget. Technology Stack: Html, Css, JavaScript";

    $(".portfolio-layout-two h2").innerText = "MartaUp";
    $(".portfolio-layout-two h3").innerText =
      "Responsive Landing MartaUp. Technology Stack: Html, Css, JavaScript";

    $(".my-skills-title").innerText = "My Skills";
    $(".connect-title").innerText = "Get in touch";
    $(".end-desc").innerText = "Thanks for attention";

    language = "en";
    ls.setItem("language", "en");
  }
})();

window.onload = function () {
  let x = 0,
    y = 0.0001,
    w = 0,
    z = 0.0001,
    start = false;

  const welcome1 = setInterval(() => {
    $(".first-section .h1").style.opacity = y;
    x += 0.00017;
    y += x;
    if (y >= 0.23) start = true;
    if (y >= 1) clearInterval(welcome1);
  }, 16);

  const welcome2 = setInterval(() => {
    if (start) {
      $(".first-section .h3").style.opacity = z;
      w += 0.000006;
      z += w;
      if (z >= 1) clearInterval(welcome2);
    }
  }, 2);
};

let pageHeight = document.documentElement.clientHeight;

$(".end-desc").style.paddingBottom = `${pageHeight / 2}px`;
$(".end-desc").style.marginTop = `${pageHeight / 2}px`;

setTimeout(() => ($(".end-desc").style.transition = `4.3s ease`), 300);

window.onscroll = function (e) {
  if ($(".first-desc").getBoundingClientRect().top > 200) {
    $(".first-desc").style.opacity =
      Math.abs($(".first-desc").getBoundingClientRect().top - pageHeight) / 300;
  }

  if (
    $(".first-desc").getBoundingClientRect().top < 200 &&
    $(".first-desc").getBoundingClientRect().top > -1000
  ) {
    $(".first-desc").style.opacity =
      ($(".first-desc").getBoundingClientRect().top + 100) / 200;
  }

  $$(".anime-dis").forEach(function (item) {
    if (item.getBoundingClientRect().top - (pageHeight - 0) < 0)
      item.classList.add("anime");
  });

  $$(".anime-second-dis").forEach(function (item) {
    if (item.getBoundingClientRect().top - (pageHeight - 0) < 0) {
      setTimeout(() => item.classList.add("anime"), 250);
    }
  });

  if ($(".anime-right").getBoundingClientRect().top - (pageHeight - 100) < 0) {
    $$(".anime-right").forEach(function (item, i) {
      item.classList.add("anime");
      item.style.transitionDelay = `${i / 8.3 + 0.1}s`;
    });
  }

  $$(".white-end").forEach(function (item) {
    if (item.getBoundingClientRect().top - pageHeight / 1.8 < 0) {
      document.body.classList.add("wb");
      setTimeout(() => $(".end-desc").classList.add("edn-desc-see"), 1050);
    } else {
      document.body.classList.remove("wb");
      $(".end-desc").classList.remove("edn-desc-see");
    }
  });

  if (ls.getItem("theme") == 0) {
    $$(".white-end").forEach(function (item) {
      if (item.getBoundingClientRect().top - pageHeight / 1.8 < 0) {
        document.body.classList.add("wb");
        setTimeout(() => $(".end-desc").classList.add("edn-desc-see"), 1900);
      } else {
        document.body.classList.remove("wb");
        $(".end-desc").classList.remove("edn-desc-see");
      }
    });
  }

  if (ls.getItem("theme") == 1) {
    $$(".white-end").forEach(function (item) {
      if (item.getBoundingClientRect().top - pageHeight / 1.8 < 0) {
        document.body.classList.add("wb-white");
        setTimeout(
          () => $(".end-desc-white").classList.add("edn-desc-see"),
          1900
        );
      } else {
        document.body.classList.remove("wb-white");
        $(".end-desc-white").classList.remove("edn-desc-see");
      }
    });
  }
};
